{"version":3,"file":"vue-array-permission.es5.js","sources":["../src/vue-array-permission.ts"],"sourcesContent":["/*\n * @Author: Ted Yuen\n * @Date: 2019-11-27 10:52:01\n * @Last Modified by: Ted Yuen\n * @Last Modified time: 2019-11-28 16:37:18\n * @Desc: main entrance\n */\nexport class VueArrayPermission {\n  // permission datas\n  permissions: Array<string> = []\n  constructor() {\n    this.reset()\n  }\n\n  getPermission() {\n    return this.permissions;\n  }\n\n  reset() {\n    this.permissions = []\n  }\n\n  authorize(permissions: Array<string>): void {\n    this.permissions = permissions\n  }\n\n  addPermission(permission: Array<string> | string): void {\n    this.permissions = this.permissions.concat(permission);\n  }\n\n  v(permission: string): boolean {\n    return this.permissions.findIndex(item => item === permission) === -1 ? false : true\n  }\n\n  vAnd(permission: Array<string>): boolean {\n    let flag = true\n    for (let temp of permission) {\n      if (this.permissions.findIndex(item => item === temp) === -1) {\n        flag = false\n        break\n      }\n    }\n    return flag\n  }\n\n  vOr(permission: Array<string>): boolean {\n    let flag = false\n    for (let temp of permission) {\n      if (this.permissions.findIndex(item => item === temp) !== -1) {\n        flag = true\n        break\n      }\n    }\n    return flag\n  }\n}\nenum TYPE {visible,hidden}\n\nlet Plugin = {\n  install: function (Vue: any, options?: object) {\n    let apermissionIns = new VueArrayPermission()\n    Vue.vap = apermissionIns\n    Vue.prototype.$vap = apermissionIns\n    Vue.directive('ap-v', function (el: any, binding: any) {\n      el.style.visibility = apermissionIns.v(binding.value) ? TYPE[TYPE.visible] : TYPE[TYPE.hidden];\n    })\n    Vue.directive('ap-vand', function (el: any, binding: any) {\n      el.style.visibility = apermissionIns.vAnd(binding.value) ? TYPE[TYPE.visible] : TYPE[TYPE.hidden];\n    })\n    Vue.directive('ap-vor', function (el: any, binding: any) {\n      el.style.visibility = apermissionIns.vOr(binding.value) ? TYPE[TYPE.visible] : TYPE[TYPE.hidden];\n    })\n  }\n}\n\nexport default Plugin\n"],"names":[],"mappings":"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"}