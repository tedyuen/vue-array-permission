{"version":3,"file":"vue-array-permission.es5.js","sources":["../src/vue-array-permission.ts"],"sourcesContent":["/*\n * @Author: Ted Yuen\n * @Date: 2019-11-27 10:52:01\n * @Last Modified by: Ted Yuen\n * @Last Modified time: 2019-11-27 15:18:30\n * @Desc: main entrance\n */\nexport class VueArrayPermission {\n  permissions?: Array<string>\n  constructor() {\n    this.reset()\n  }\n\n  reset() {\n    this.permissions = []\n  }\n\n  authorize(permissions: Array<string>): void {\n    this.permissions = permissions\n  }\n\n  v(permission: string): boolean {\n    if (this.permissions) {\n      return this.permissions.findIndex(item => item === permission) === -1 ? false : true\n    } else {\n      return false\n    }\n  }\n\n  vAnd(permission: Array<string>): boolean {\n    if (permission && this.permissions) {\n      let flag = true;\n      for(let temp of permission) {\n        if(this.permissions.findIndex(item => item === temp) === -1) {\n          flag = false;\n          break;\n        }\n      }\n      return flag\n    } else {\n      return false\n    }\n  }\n\n  vOr(permission: Array<string>): boolean {\n    if (permission && this.permissions) {\n      let flag = false;\n      for(let temp of permission) {\n        if(this.permissions.findIndex(item => item === temp) !== -1) {\n          flag = true;\n          break;\n        }\n      }\n      return flag\n    } else {\n      return false\n    }\n  }\n}\n\nlet Plugin = {\n  install: function(Vue: any, options?: object) {\n    let apermissionIns = new VueArrayPermission()\n    Vue.vap = apermissionIns\n    Vue.prototype.$vap = apermissionIns\n    Vue.directive('ap-show', function(el: any, ref: any, vnode:any) {\n      if (!apermissionIns.v(ref.arg)) {\n        el.style.display = 'none'\n      }\n      // let value = apermissionIns.hasPermission(ref.arg);\n      // vnode = locateNode(vnode);\n      // var transition$$1 = vnode.data && vnode.data.transition;         //尝试获取transition，如果v-show绑定的标签外层套了一个transition则会把信息保存到该对象里 这是transition的组件分支，可先忽略 \n      // var originalDisplay = el.__vOriginalDisplay =                      //保存最初的display属性\n      //   el.style.display === 'none' ? '' : el.style.display;\n      // if (value && transition$$1) {                                     //如果transition$$1存在的话\n      //   vnode.data.show = true;\n      //   enter(vnode, function () {\n      //     el.style.display = originalDisplay;\n      //   });\n      // } else {\n      //   el.style.display = value ? originalDisplay : 'none';             //否则直接根据value的值是否可以转换为1来设置el.style.display属性\n      // }\n    })\n  }\n}\n\nexport default Plugin\n"],"names":[],"mappings":"AAAA;;;;;;;AAOA;IAEE;QACE,IAAI,CAAC,KAAK,EAAE,CAAA;KACb;IAED,kCAAK,GAAL;QACE,IAAI,CAAC,WAAW,GAAG,EAAE,CAAA;KACtB;IAED,sCAAS,GAAT,UAAU,WAA0B;QAClC,IAAI,CAAC,WAAW,GAAG,WAAW,CAAA;KAC/B;IAED,8BAAC,GAAD,UAAE,UAAkB;QAClB,IAAI,IAAI,CAAC,WAAW,EAAE;YACpB,OAAO,IAAI,CAAC,WAAW,CAAC,SAAS,CAAC,UAAA,IAAI,IAAI,OAAA,IAAI,KAAK,UAAU,GAAA,CAAC,KAAK,CAAC,CAAC,GAAG,KAAK,GAAG,IAAI,CAAA;SACrF;aAAM;YACL,OAAO,KAAK,CAAA;SACb;KACF;IAED,iCAAI,GAAJ,UAAK,UAAyB;QAC5B,IAAI,UAAU,IAAI,IAAI,CAAC,WAAW,EAAE;YAClC,IAAI,IAAI,GAAG,IAAI,CAAC;oCACR,IAAI;gBACV,IAAG,OAAK,WAAW,CAAC,SAAS,CAAC,UAAA,IAAI,IAAI,OAAA,IAAI,KAAK,IAAI,GAAA,CAAC,KAAK,CAAC,CAAC,EAAE;oBAC3D,IAAI,GAAG,KAAK,CAAC;;iBAEd;;;YAJH,KAAgB,UAAU,EAAV,yBAAU,EAAV,wBAAU,EAAV,IAAU;gBAAtB,IAAI,IAAI,mBAAA;sCAAJ,IAAI;;;aAKX;YACD,OAAO,IAAI,CAAA;SACZ;aAAM;YACL,OAAO,KAAK,CAAA;SACb;KACF;IAED,gCAAG,GAAH,UAAI,UAAyB;QAC3B,IAAI,UAAU,IAAI,IAAI,CAAC,WAAW,EAAE;YAClC,IAAI,IAAI,GAAG,KAAK,CAAC;oCACT,IAAI;gBACV,IAAG,OAAK,WAAW,CAAC,SAAS,CAAC,UAAA,IAAI,IAAI,OAAA,IAAI,KAAK,IAAI,GAAA,CAAC,KAAK,CAAC,CAAC,EAAE;oBAC3D,IAAI,GAAG,IAAI,CAAC;;iBAEb;;;YAJH,KAAgB,UAAU,EAAV,yBAAU,EAAV,wBAAU,EAAV,IAAU;gBAAtB,IAAI,IAAI,mBAAA;sCAAJ,IAAI;;;aAKX;YACD,OAAO,IAAI,CAAA;SACZ;aAAM;YACL,OAAO,KAAK,CAAA;SACb;KACF;IACH,yBAAC;CAAA,IAAA;AAED,IAAI,MAAM,GAAG;IACX,OAAO,EAAE,UAAS,GAAQ,EAAE,OAAgB;QAC1C,IAAI,cAAc,GAAG,IAAI,kBAAkB,EAAE,CAAA;QAC7C,GAAG,CAAC,GAAG,GAAG,cAAc,CAAA;QACxB,GAAG,CAAC,SAAS,CAAC,IAAI,GAAG,cAAc,CAAA;QACnC,GAAG,CAAC,SAAS,CAAC,SAAS,EAAE,UAAS,EAAO,EAAE,GAAQ,EAAE,KAAS;YAC5D,IAAI,CAAC,cAAc,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE;gBAC9B,EAAE,CAAC,KAAK,CAAC,OAAO,GAAG,MAAM,CAAA;aAC1B;;;;;;;;;;;;;;SAcF,CAAC,CAAA;KACH;CACF,CAAA;;;;;"}