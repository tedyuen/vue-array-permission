{"version":3,"file":"vue-array-permission.umd.js","sources":["../src/vue-array-permission.ts"],"sourcesContent":["/*\n * @Author: Ted Yuen\n * @Date: 2019-11-27 10:52:01\n * @Last Modified by: Ted Yuen\n * @Last Modified time: 2019-11-27 15:18:30\n * @Desc: main entrance\n */\nexport class VueArrayPermission {\n  permissions?: Array<string>\n  constructor() {\n    this.reset()\n  }\n\n  reset() {\n    this.permissions = []\n  }\n\n  authorize(permissions: Array<string>): void {\n    this.permissions = permissions\n  }\n\n  v(permission: string): boolean {\n    if (this.permissions) {\n      return this.permissions.findIndex(item => item === permission) === -1 ? false : true\n    } else {\n      return false\n    }\n  }\n\n  vAnd(permission: Array<string>): boolean {\n    if (permission && this.permissions) {\n      let flag = true;\n      for(let temp of permission) {\n        if(this.permissions.findIndex(item => item === temp) === -1) {\n          flag = false;\n          break;\n        }\n      }\n      return flag\n    } else {\n      return false\n    }\n  }\n\n  vOr(permission: Array<string>): boolean {\n    if (permission && this.permissions) {\n      let flag = false;\n      for(let temp of permission) {\n        if(this.permissions.findIndex(item => item === temp) !== -1) {\n          flag = true;\n          break;\n        }\n      }\n      return flag\n    } else {\n      return false\n    }\n  }\n}\n\nlet Plugin = {\n  install: function(Vue: any, options?: object) {\n    let apermissionIns = new VueArrayPermission()\n    Vue.vap = apermissionIns\n    Vue.prototype.$vap = apermissionIns\n    Vue.directive('ap-show', function(el: any, ref: any, vnode:any) {\n      if (!apermissionIns.v(ref.arg)) {\n        el.style.display = 'none'\n      }\n      // let value = apermissionIns.hasPermission(ref.arg);\n      // vnode = locateNode(vnode);\n      // var transition$$1 = vnode.data && vnode.data.transition;         //尝试获取transition，如果v-show绑定的标签外层套了一个transition则会把信息保存到该对象里 这是transition的组件分支，可先忽略 \n      // var originalDisplay = el.__vOriginalDisplay =                      //保存最初的display属性\n      //   el.style.display === 'none' ? '' : el.style.display;\n      // if (value && transition$$1) {                                     //如果transition$$1存在的话\n      //   vnode.data.show = true;\n      //   enter(vnode, function () {\n      //     el.style.display = originalDisplay;\n      //   });\n      // } else {\n      //   el.style.display = value ? originalDisplay : 'none';             //否则直接根据value的值是否可以转换为1来设置el.style.display属性\n      // }\n    })\n  }\n}\n\nexport default Plugin\n"],"names":[],"mappings":";;;;;;EAAA;;;;;;;AAOA;MAEE;UACE,IAAI,CAAC,KAAK,EAAE,CAAA;OACb;MAED,kCAAK,GAAL;UACE,IAAI,CAAC,WAAW,GAAG,EAAE,CAAA;OACtB;MAED,sCAAS,GAAT,UAAU,WAA0B;UAClC,IAAI,CAAC,WAAW,GAAG,WAAW,CAAA;OAC/B;MAED,8BAAC,GAAD,UAAE,UAAkB;UAClB,IAAI,IAAI,CAAC,WAAW,EAAE;cACpB,OAAO,IAAI,CAAC,WAAW,CAAC,SAAS,CAAC,UAAA,IAAI,IAAI,OAAA,IAAI,KAAK,UAAU,GAAA,CAAC,KAAK,CAAC,CAAC,GAAG,KAAK,GAAG,IAAI,CAAA;WACrF;eAAM;cACL,OAAO,KAAK,CAAA;WACb;OACF;MAED,iCAAI,GAAJ,UAAK,UAAyB;UAC5B,IAAI,UAAU,IAAI,IAAI,CAAC,WAAW,EAAE;cAClC,IAAI,IAAI,GAAG,IAAI,CAAC;sCACR,IAAI;kBACV,IAAG,OAAK,WAAW,CAAC,SAAS,CAAC,UAAA,IAAI,IAAI,OAAA,IAAI,KAAK,IAAI,GAAA,CAAC,KAAK,CAAC,CAAC,EAAE;sBAC3D,IAAI,GAAG,KAAK,CAAC;;mBAEd;;;cAJH,KAAgB,UAAU,EAAV,yBAAU,EAAV,wBAAU,EAAV,IAAU;kBAAtB,IAAI,IAAI,mBAAA;wCAAJ,IAAI;;;eAKX;cACD,OAAO,IAAI,CAAA;WACZ;eAAM;cACL,OAAO,KAAK,CAAA;WACb;OACF;MAED,gCAAG,GAAH,UAAI,UAAyB;UAC3B,IAAI,UAAU,IAAI,IAAI,CAAC,WAAW,EAAE;cAClC,IAAI,IAAI,GAAG,KAAK,CAAC;sCACT,IAAI;kBACV,IAAG,OAAK,WAAW,CAAC,SAAS,CAAC,UAAA,IAAI,IAAI,OAAA,IAAI,KAAK,IAAI,GAAA,CAAC,KAAK,CAAC,CAAC,EAAE;sBAC3D,IAAI,GAAG,IAAI,CAAC;;mBAEb;;;cAJH,KAAgB,UAAU,EAAV,yBAAU,EAAV,wBAAU,EAAV,IAAU;kBAAtB,IAAI,IAAI,mBAAA;wCAAJ,IAAI;;;eAKX;cACD,OAAO,IAAI,CAAA;WACZ;eAAM;cACL,OAAO,KAAK,CAAA;WACb;OACF;MACH,yBAAC;EAAD,CAAC,IAAA;EAED,IAAI,MAAM,GAAG;MACX,OAAO,EAAE,UAAS,GAAQ,EAAE,OAAgB;UAC1C,IAAI,cAAc,GAAG,IAAI,kBAAkB,EAAE,CAAA;UAC7C,GAAG,CAAC,GAAG,GAAG,cAAc,CAAA;UACxB,GAAG,CAAC,SAAS,CAAC,IAAI,GAAG,cAAc,CAAA;UACnC,GAAG,CAAC,SAAS,CAAC,SAAS,EAAE,UAAS,EAAO,EAAE,GAAQ,EAAE,KAAS;cAC5D,IAAI,CAAC,cAAc,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE;kBAC9B,EAAE,CAAC,KAAK,CAAC,OAAO,GAAG,MAAM,CAAA;eAC1B;;;;;;;;;;;;;;WAcF,CAAC,CAAA;OACH;GACF,CAAA;;;;;;;;;;;;;"}