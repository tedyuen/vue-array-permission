{"version":3,"file":"vue-array-permission.umd.js","sources":["../src/vue-array-permission.ts"],"sourcesContent":["/*\n * @Author: Ted Yuen\n * @Date: 2019-11-27 10:52:01\n * @Last Modified by: Ted Yuen\n * @Last Modified time: 2019-11-28 16:37:18\n * @Desc: main entrance\n */\nexport class VueArrayPermission {\n  // permission datas\n  permissions: Array<string> = []\n  constructor() {\n    this.reset()\n  }\n\n  getPermission() {\n    return this.permissions\n  }\n\n  reset() {\n    this.permissions = []\n  }\n\n  authorize(permissions: Array<string>): void {\n    this.permissions = permissions\n  }\n\n  addPermission(permission: Array<string> | string): void {\n    this.permissions = this.permissions.concat(permission)\n  }\n\n  v(permission: string): boolean {\n    return this.permissions.findIndex(item => item === permission) === -1 ? false : true\n  }\n\n  vAnd(permission: Array<string>): boolean {\n    let flag = true\n    for (let temp of permission) {\n      if (this.permissions.findIndex(item => item === temp) === -1) {\n        flag = false\n        break\n      }\n    }\n    return flag\n  }\n\n  vOr(permission: Array<string>): boolean {\n    let flag = false\n    for (let temp of permission) {\n      if (this.permissions.findIndex(item => item === temp) !== -1) {\n        flag = true\n        break\n      }\n    }\n    return flag\n  }\n}\nenum TYPE {\n  visible,\n  hidden\n}\n\nlet Plugin = {\n  install: function(Vue: any, options?: object) {\n    let apermissionIns = new VueArrayPermission()\n    Vue.vap = apermissionIns\n    Vue.prototype.$vap = apermissionIns\n    Vue.directive('ap-show', function(el: any, binding: any) {\n      el.style.visibility = apermissionIns.v(binding.arg) ? TYPE[TYPE.visible] : TYPE[TYPE.hidden]\n    })\n    Vue.directive('ap-v', function(el: any, binding: any) {\n      el.style.visibility = apermissionIns.v(binding.value) ? TYPE[TYPE.visible] : TYPE[TYPE.hidden]\n    })\n    Vue.directive('ap-vand', function(el: any, binding: any) {\n      el.style.visibility = apermissionIns.vAnd(binding.value)\n        ? TYPE[TYPE.visible]\n        : TYPE[TYPE.hidden]\n    })\n    Vue.directive('ap-vor', function(el: any, binding: any) {\n      el.style.visibility = apermissionIns.vOr(binding.value)\n        ? TYPE[TYPE.visible]\n        : TYPE[TYPE.hidden]\n    })\n  }\n}\n\nexport default Plugin\n"],"names":[],"mappings":"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"}